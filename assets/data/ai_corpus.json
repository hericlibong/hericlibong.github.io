[
  {%- for post in site.posts -%}
    {
      "id": "{{ post.title | slugify }}",
      "title": {{ post.title | jsonify }},
      "content": {{ post.content | strip_html | jsonify }},
      "type": "article",
      "tags": [
        {%- for tag in post.tags -%}
          {{ tag | jsonify }}{% unless forloop.last %},{% endunless %}
        {%- endfor -%}
      ],
      "author": {{ post.author | default: site.author | jsonify }},
      "date": "{{ post.date | date: '%Y-%m-%d' }}",
      "url": {{ post.url | absolute_url | jsonify }}
    }{% unless forloop.last and site.projects.size == 0 and site.pages.size == 0 %},{% endunless %}
  {%- endfor -%}
  {%- if site.projects.size > 0 -%}
    {%- for project in site.projects -%}
      {
        "id": "{{ project.title | slugify }}",
        "title": {{ project.title | jsonify }},
        "content": {{ project.content | strip_html | jsonify }},
        "type": "project",
        "tags": [
          {%- for tag in project.tags -%}
            {{ tag | jsonify }}{% unless forloop.last %},{% endunless %}
          {%- endfor -%}
        ],
        "author": {{ project.author | default: site.author | jsonify }},
        "date": "{{ project.date | date: '%Y-%m-%d' }}",
        "url": {{ project.url | absolute_url | jsonify }}
      }{% unless forloop.last and site.pages.size == 0 %},{% endunless %}
    {%- endfor -%}
  {%- endif -%}
  {%- if site.pages.size > 0 -%}
    {%- for page in site.pages -%}
      {%- if page.title and page.title != '404' and page.title != 'Home' -%}
        {
          "id": "{{ page.title | slugify }}",
          "title": {{ page.title | jsonify }},
          "content": {{ page.content | strip_html | jsonify }},
          "type": "page",
          "tags": [],
          "author": {{ site.author | jsonify }},
          "date": "",
          "url": {{ page.url | absolute_url | jsonify }}
        }{% unless forloop.last %},{% endunless %}
      {%- endif -%}
    {%- endfor -%}
  {%- endif -%}
]